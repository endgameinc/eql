# Event Query Language - Changelog
The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

# Version 0.9.10
_Released 2021-08-18_

### Added
* Endpoint `$variable` syntax, behind parser flag

# Version 0.9.9
_Released 2021-02-22_

### Added
* Elasticsearch `like`/ `like~` syntax, behind parser flag
* Elasticsearch `regex` / `regex~` syntax, behind parser flag
* Elasticsearch insensitive function syntax `function~(...)`, behind parser flag

# Version 0.9.8
_Released 2021-01-14_

### Added
* Optimization to combine adjacent `wildcard()` calls over the same field


## Version 0.9.7
_Released 2020-12-01_

### Added
* Support for extending attributes within macros

## Version 0.9.6
_Released 2020-11-24_

### Changed
* Elasticsearch insensitive wildcard `:` syntax to support lists and wildcards, behind parser flag


## Version 0.9.5
_Released 2020-10-20_

### Added
* Toggle to parse with Elasticsearch syntax

### Changed
* Parser rule for method syntax. No whitespace is allowed between the `:` and opening `(`

## Version 0.9.4
_Released 2020-07-27_

### Fixed
* Uncaught exception when macros return a field


## Version 0.9.3
_Released 2020-07-07_

### Added
* Internal toggle to turn off case insensitivity
* Additional tests to handle case sensitive and insensitive modes


## Version 0.9.2
_Released 2020-05-29_

### Fixed
* Removed invalid index into empty array for `UniqueCountPipe.output_schemas` with custom walkers


## Version 0.9.1
_Released 2020-05-28_

### Removed
* `case_sensitive` parameter to `between`


## Version 0.9.0
_Released 2020-05-18_

### Added
* Support for escaped identifiers in fields using \`backtick\` syntax
* Implemented three-value logic for boolean and null handling
* Migrate python tests to TOML files
* Optimization rule for inverting comparisons (`not (x <= y)` ==> `x > y`)
* (Internal) AST nodes for `IsNull`/`IsNotNull`

### Changed
* (Internal) Changed the type system to use TypeHint/TypeFoldCheck/NodeInfo instead of tuples
* Treat wildcards the same on the left and right side of `==` or `!=`
* Removed forced float division (now `3 / 2` ==> `1` instead of `1.5`)
* Made `<`, `<=`, `>=`, `>` perform case-insensitive string comparisons

### Fixed
* Boolean optimizations: `x and true and y` is correctly converted to `x and y`
* DeMorgan logic for expanding `not` nodes

### Removed
* Deprecated sequence units besides `d`,`h`,`m`,`s`,`ms`
* Fractional sequence intervals
* Requirements.txt and moved into `setup.py`


## Version 0.8.8
_Released 2020-04-24_

### Changed
* Regular expressions generated by CidrMatch create non-capturing groups


## Version 0.8.7
_Released 2020-04-23_

### Added
* Function `eql.utils.get_query_type`
* Function `eql.utils.get_required_event_types`
* Function `eql.utils.uses_ancestry`


## Version 0.8.6
_Released 2020-04-06_

### Changed
* Made missing `where` raise a `EqlSyntaxError` instead of a `EqlSemanticError`


## Version 0.8.5
_Released 2020-03-18_

### Fixed
* `Walker` auto-recursion on BaseNode


## Version 0.8.4
_Released 2020-03-18_

### Added
* `skip_optimizations` toggle to disable optimizations when parsing

### Changed
* Moved optimization methods to `Optimizer` class.


## Version 0.8.3
_Released 2020-03-11_

### Fixed
* `CidrMatch.run` signature for `cidrMatch` optimization


## Version 0.8.2
_Released 2020-01-13_

### Fixed
* Restored missing text from semantic error messages


## Version 0.8.1
_Released 2020-01-09_

### Fixed
* Correctly load definitions/schema with `eql.build.get_engine`


## Version 0.8
_Released 2019-11-01_

### Added
* Method syntax
* Mathematical operators `+`, `-`, `*`, `/`, `%`
* Documentation for `match()` function
* `between()` function for extracting the first substring between two strings
* `cidrMatch()` function and several helper methods for subnet matching and regex building 
* `extract_query_terms` to extract the original text for each event in a query

### Changed
* Parser from TatSu to Lark

### Fixed
* Examples for sequences in the Implementation Details page
* Compatibility for `eql shell` with Python 2.7


## Version 0.7
_Released 2019-07-24_

### Added
* Badges to README (PyPi, Twitter, ReadTheDocs, Gitter)
* Multiple values within `arrayContains()` function
* `arrayCount` function for counting the number of matches in an array
* Interactive shell with tables
* Validation system that matches types across schema and comparisons
* `SignatureMixin` class used to validate input and output arguments to functions, and pipes
* Better error messages with multiple carets
* Base class for all EQL errors
* Test data, queries, and the expected output for unit tests
* Signature base class
* Helper `Walker` classes with better methods and context for AST traversal
* `ParserConfig` class with context manager that toggles thread-specific parser settings
* Additional imports to the root `eql` module
* Autogenerated parser with `make parser` included in python module
* `is_stateful` function to `eql.utils` to determine if a parsed query is stateful
* `match_kv` function to `eql.utils` to autogenerate an AST from a dictionary of fields -> value(s)

### Changed
* Rearranged imports, `eql.engines.native` is now `eql.engine`
* Using walker methods instead of NodeMethods to integrate with engine
* Moved function call evaluation to custom classes in `eql.functions`
* Moved highlighter from sphinx document generation to `eql.highlighters`
* Moved PipeCommand subclasses to `eql.pipes`
* Exception class names to all have **Eql** prefix
* Moved unit tests to `eql.tests` module and rearranged test
* Implementation of `by` for sequences, joins and pipes to perform case-insensitive checks

### Fixed
* Bug where wildcards were only matched on the first line of text in a field

### Removed
* Default EQL schema. Now accepts all input and event types by default


## Version 0.6.3
_Released 2019-04-17_

### Added
* @itsnotapt Made `pid` and `ppid` fields configurable


## Version 0.6.2
_Released 2018-12-13_

### Fixed
* Broken implementation of streaming .jsonl files


## Version 0.6.1
_Released 2019-12-05_

### Added
* Support for gzipped files


## Version 0.6
_Initial Release 2018-11_30_

### Added (Initial Features)
* EQL parser with Tatsu
* Evaluation engine in `eql.engines.native`
* Macro and constants for preprocessors
* `eql` CLI command for querying against a JSON file
* Security schema by default (`file`, `network`, `process`, etc.)
